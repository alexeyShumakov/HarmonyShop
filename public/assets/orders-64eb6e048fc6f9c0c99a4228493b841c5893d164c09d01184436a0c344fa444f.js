(function(){$(function(){return $("#order_phone").mask("+7(999) 999-99-99"),$("#order_city").autocomplete({source:function(e,t){$.ajax({url:"http://api.cdek.ru/city/getListByTerm/jsonp.php?callback=?",dataType:"jsonp",data:{q:function(){return $("#order_city").val()},name_startsWith:function(){return $("#order_city").val()}},success:function(e){e.geonames=$.grep(e.geonames,function(e){return"1"===e.countryId}),t($.map(e.geonames,function(e){return{label:e.name,value:e.name,id:e.id}}))}})},minLength:2,select:function(e,t){return $.ajax({url:"/delivery_price",method:"get",dataType:"json",data:{city:t.item.value,city_id:t.item.id},success:function(e){$(".total_price").children("span").html(e.total_price),$(".price").children("span").html(e.delivery_price),$(".period").children("span").html(e.delivery_time)}})}})})}).call(this);